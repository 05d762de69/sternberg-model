<!-- triangle.html (REPLACE. Clean, centered. Slider only appears in "For lovers". Hover works.) -->
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>The Model. And Us.</title>
    <meta name="description" content="Overlapping components of love. Hover to reveal. Switch to our timeline." />
    <link rel="stylesheet" href="style.css" />
  </head>

  <body>
    <main class="shell">
      <section class="card" aria-label="Venn Page">
        <header class="topbar">
          <a class="btn btn-ghost btn-sm" href="index.html">← Back</a>

          <div class="seg" role="tablist" aria-label="Mode toggle">
            <button
              id="nerdsTab"
              class="seg-btn is-active"
              type="button"
              role="tab"
              aria-selected="true"
            >
              For nerds
            </button>
            <button
              id="loversTab"
              class="seg-btn"
              type="button"
              role="tab"
              aria-selected="false"
            >
              For lovers
            </button>
          </div>
        </header>

        <h2 class="h2 center">Three components</h2>
        <p id="lede" class="subtitle center">
          Hover the diagram. The explanations live inside it.
        </p>

        <div class="center-wrap">
          <div class="venn-card">
            <svg
              id="vennSvg"
              class="venn"
              viewBox="0 0 720 520"
              role="img"
              aria-label="Overlapping components of love"
            >
              <defs>
                <filter id="frost" x="-20%" y="-20%" width="140%" height="140%">
                  <feGaussianBlur in="SourceGraphic" stdDeviation="0.8" result="blur" />
                  <feColorMatrix
                    in="blur"
                    type="matrix"
                    values="
                      1 0 0 0 0
                      0 1 0 0 0
                      0 0 1 0 0
                      0 0 0 0.95 0"
                    result="glass"
                  />
                  <feMerge>
                    <feMergeNode in="glass" />
                    <feMergeNode in="SourceGraphic" />
                  </feMerge>
                </filter>

                <filter id="glow" x="-30%" y="-30%" width="160%" height="160%">
                  <feGaussianBlur stdDeviation="7" result="coloredBlur" />
                  <feMerge>
                    <feMergeNode in="coloredBlur" />
                    <feMergeNode in="SourceGraphic" />
                  </feMerge>
                </filter>

                <!-- Clip paths for regions -->
                <clipPath id="clipI">
                  <circle id="clipI_c" cx="280" cy="295" r="170"></circle>
                </clipPath>
                <clipPath id="clipP">
                  <circle id="clipP_c" cx="440" cy="215" r="170"></circle>
                </clipPath>
                <clipPath id="clipC">
                  <circle id="clipC_c" cx="520" cy="330" r="170"></circle>
                </clipPath>

                <clipPath id="clipIP">
                  <g clip-path="url(#clipI)">
                    <circle id="clipIP_c" cx="440" cy="215" r="170"></circle>
                  </g>
                </clipPath>
                <clipPath id="clipIC">
                  <g clip-path="url(#clipI)">
                    <circle id="clipIC_c" cx="520" cy="330" r="170"></circle>
                  </g>
                </clipPath>
                <clipPath id="clipPC">
                  <g clip-path="url(#clipP)">
                    <circle id="clipPC_c" cx="520" cy="330" r="170"></circle>
                  </g>
                </clipPath>
                <clipPath id="clipIPC">
                  <g clip-path="url(#clipIP)">
                    <circle id="clipIPC_c" cx="520" cy="330" r="170"></circle>
                  </g>
                </clipPath>
              </defs>

              <!-- Base frosted circles (these resize in lovers mode) -->
              <g filter="url(#frost)">
                <circle id="circleI" class="venn-circle" cx="280" cy="295" r="170"></circle>
                <circle id="circleP" class="venn-circle" cx="440" cy="215" r="170"></circle>
                <circle id="circleC" class="venn-circle" cx="520" cy="330" r="170"></circle>
              </g>

              <!-- Highlight overlays (colored). Above circles. -->
              <g id="highlights" filter="url(#glow)">
                <rect id="hlI" class="hl hl-i" x="0" y="0" width="720" height="520" clip-path="url(#clipI)"></rect>
                <rect id="hlP" class="hl hl-p" x="0" y="0" width="720" height="520" clip-path="url(#clipP)"></rect>
                <rect id="hlC" class="hl hl-c" x="0" y="0" width="720" height="520" clip-path="url(#clipC)"></rect>

                <rect id="hlIP" class="hl hl-ip" x="0" y="0" width="720" height="520" clip-path="url(#clipIP)"></rect>
                <rect id="hlIC" class="hl hl-ic" x="0" y="0" width="720" height="520" clip-path="url(#clipIC)"></rect>
                <rect id="hlPC" class="hl hl-pc" x="0" y="0" width="720" height="520" clip-path="url(#clipPC)"></rect>

                <rect id="hlIPC" class="hl hl-ipc" x="0" y="0" width="720" height="520" clip-path="url(#clipIPC)"></rect>
              </g>

              <!-- Hover-only text inside regions -->
              <g id="explanations" class="explain" aria-hidden="true">
                <g id="txtI" opacity="0">
                  <text x="215" y="325" class="ex-title" text-anchor="middle">Intimacy</text>
                  <text x="215" y="348" class="ex-body" text-anchor="middle">Closeness. Trust. Being known.</text>
                </g>

                <g id="txtP" opacity="0">
                  <text x="435" y="220" class="ex-title" text-anchor="middle">Passion</text>
                  <text x="435" y="243" class="ex-body" text-anchor="middle">Desire. Excitement. Pull.</text>
                </g>

                <g id="txtC" opacity="0">
                  <text x="555" y="355" class="ex-title" text-anchor="middle">Commitment</text>
                  <text x="555" y="378" class="ex-body" text-anchor="middle">Choosing. Staying. Building.</text>
                </g>

                <g id="txtIP" opacity="0">
                  <text x="345" y="275" class="ex-title" text-anchor="middle">Romantic</text>
                  <text x="345" y="298" class="ex-body" text-anchor="middle">Intimacy + Passion</text>
                </g>

                <g id="txtIC" opacity="0">
                  <text x="400" y="365" class="ex-title" text-anchor="middle">Companionate</text>
                  <text x="400" y="388" class="ex-body" text-anchor="middle">Intimacy + Commitment</text>
                </g>

                <g id="txtPC" opacity="0">
                  <text x="510" y="285" class="ex-title" text-anchor="middle">Fatuous</text>
                  <text x="510" y="308" class="ex-body" text-anchor="middle">Passion + Commitment</text>
                </g>

                <g id="txtIPC" opacity="0">
                  <text x="445" y="315" class="ex-title" text-anchor="middle">Consummate</text>
                  <text x="445" y="338" class="ex-body" text-anchor="middle">Intimacy + Passion + Commitment</text>
                </g>
              </g>

              <!-- Labels next to circles (always visible). -->
              <g class="venn-labels">
                <text x="145" y="285" class="label-title">Intimacy</text>
                <text x="145" y="305" class="label-sub">closeness. trust. being known.</text>

                <text x="455" y="110" class="label-title">Passion</text>
                <text x="455" y="130" class="label-sub">desire. excitement. pull.</text>

                <text x="565" y="470" class="label-title" text-anchor="end">Commitment</text>
                <text x="565" y="490" class="label-sub" text-anchor="end">choosing. staying. building.</text>
              </g>

              <!-- Transparent hit regions. Must be LAST so it catches hover. -->
              <g id="hitRegions">
                <rect class="hit" data-region="I"   x="0" y="0" width="720" height="520" clip-path="url(#clipI)" />
                <rect class="hit" data-region="P"   x="0" y="0" width="720" height="520" clip-path="url(#clipP)" />
                <rect class="hit" data-region="C"   x="0" y="0" width="720" height="520" clip-path="url(#clipC)" />

                <rect class="hit" data-region="IP"  x="0" y="0" width="720" height="520" clip-path="url(#clipIP)" />
                <rect class="hit" data-region="IC"  x="0" y="0" width="720" height="520" clip-path="url(#clipIC)" />
                <rect class="hit" data-region="PC"  x="0" y="0" width="720" height="520" clip-path="url(#clipPC)" />

                <rect class="hit" data-region="IPC" x="0" y="0" width="720" height="520" clip-path="url(#clipIPC)" />
              </g>
            </svg>

            <!-- Lovers-only controls -->
            <div id="loversControls" class="controls" hidden>
              <div class="controls-row">
                <button id="prevBtn" class="btn btn-ghost btn-sm" type="button">←</button>

                <input
                  id="timeline"
                  class="slider"
                  type="range"
                  min="0"
                  max="4"
                  step="1"
                  value="0"
                  aria-label="Timeline slider"
                />

                <button id="nextBtn" class="btn btn-primary btn-sm" type="button">→</button>
              </div>

              <div class="milestone">
                <div class="milestone-head">
                  <div id="milestoneTitle" class="milestone-title">A starting point</div>
                  <div id="milestoneMeta" class="mini">Milestone 1 of 5</div>
                </div>
                <div id="milestoneText" class="milestone-text">
                  Replace this with your first milestone text in triangle.js.
                </div>
              </div>
            </div>
          </div>
        </div>

        <footer class="footer">
          <span class="footer-left">Act 1</span>
          <span class="footer-right" aria-hidden="true">◎</span>
        </footer>
      </section>
    </main>

    <script src="triangle.js" defer></script>
  </body>
</html>
